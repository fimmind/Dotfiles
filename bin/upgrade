#!/usr/bin/bash
sudo_upgrade(){
  pacman-key --refresh-keys
  pacman -Suy --noconfirm
  tlmgr update --self --all --reinstall-forcibly-removed
}

no_sudo_upgrade(){
  cd ~/Dotfiles
  make updateVimPlug
  pamac update # it mast be last
}

printf "Do you want to start full system upgrade? (y/n) "
read answer

if [[ -z "$answer" ]] || [[ "$answer" == "y" ]]; then
  sudo bash -c "$(declare -f sudo_upgrade); sudo_upgrade"
  no_sudo_upgrade
fi
